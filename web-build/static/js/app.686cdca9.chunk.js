(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{296:function(e,t,n){"use strict";n.d(t,"a",(function(){return G}));n(432);var a=n(111),i=n(3),r=n(449),c=n(450),o=n(15),s=n.n(o),l=n(0),u=n(127),d=n(11),h=n(46),j=n(117),b=(n(422),n(423),(0===j.a.apps.length?j.a.initializeApp({apiKey:"AIzaSyDVS5MFU3_YbS2aLBcyez59CUgXD6tAxG8",authDomain:"signal-clone-ec433.firebaseapp.com",projectId:"signal-clone-ec433",storageBucket:"signal-clone-ec433.appspot.com",messagingSenderId:"1059987507244",appId:"1:1059987507244:web:35d8081dc5dcd0d6dc2989"}):j.a.app()).firestore()),f=j.a.auth(),p=n(2),g=function(e){var t=e.navigation,n=Object(l.useState)(""),i=s()(n,2),r=i[0],c=i[1],o=Object(l.useState)(""),j=s()(o,2),b=j[0],g=j[1];Object(l.useEffect)((function(){return f.onAuthStateChanged((function(e){e&&t.replace("Home")}))}),[]);var x=function(){f.signInWithEmailAndPassword(r,b).catch((function(e){return alert(e)}))};return Object(p.jsxs)(u.a,{behavior:"padding",style:m.container,children:[Object(p.jsx)(a.a,{style:"light"}),Object(p.jsx)(h.c,{source:{uri:"https://blog.mozilla.org/internetcitizen/files/2018/08/signal-logo.png"},style:{width:200,height:200}}),Object(p.jsxs)(d.a,{style:m.inputContainer,children:[Object(p.jsx)(h.d,{placeholder:"Email",autoFocus:!0,type:"email",value:r,onChangeText:function(e){return c(e)}}),Object(p.jsx)(h.d,{placeholder:"Password",secureTextEntry:!0,type:"password",value:b,onChangeText:function(e){return g(e)},onSubmitEditing:x})]}),Object(p.jsx)(h.b,{containerStyle:m.button,onPress:x,title:"Login"}),Object(p.jsx)(h.b,{containerStyle:m.button,onPress:function(){return t.navigate("Register")},type:"outline",title:"Register"}),Object(p.jsx)(d.a,{style:{height:100}})]})},m=i.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},inputContainer:{width:300},button:{width:200,marginTop:10}}),x=function(e){var t=e.navigation,n=Object(l.useState)(""),i=s()(n,2),r=i[0],c=i[1],o=Object(l.useState)(""),j=s()(o,2),b=j[0],g=j[1],m=Object(l.useState)(""),x=s()(m,2),y=x[0],v=x[1],C=Object(l.useState)(""),S=s()(C,2),w=S[0],L=S[1];Object(l.useLayoutEffect)((function(){t.setOptions({headerBackTitle:"Login"})}),[t]);var E=function(){f.createUserWithEmailAndPassword(b,y).then((function(e){e.user.updateProfile({displayName:r,photoURL:w||"https://censur.es/wp-content/uploads/2019/03/default-avatar.png"})})).catch((function(e){return alert(e.message)}))};return Object(p.jsxs)(u.a,{behavior:"padding",style:O.container,children:[Object(p.jsx)(a.a,{style:"light"}),Object(p.jsx)(h.f,{h3:!0,style:{marginBottom:50},children:"Create a Signal account"}),Object(p.jsxs)(d.a,{style:O.inputContainer,children:[Object(p.jsx)(h.d,{placeholder:"Full Name",autoFocus:!0,type:"text",value:r,onChangeText:function(e){return c(e)}}),Object(p.jsx)(h.d,{placeholder:"Email",type:"email",value:b,onChangeText:function(e){return g(e)}}),Object(p.jsx)(h.d,{placeholder:"Password",type:"text",secureTextEntry:!0,value:y,onChangeText:function(e){return v(e)}}),Object(p.jsx)(h.d,{placeholder:"Avatar URL",type:"text",value:w,onChangeText:function(e){return L(e)},onSubmitEditing:E})]}),Object(p.jsx)(h.b,{containerStyle:O.button,raised:!0,title:"Register",onPress:E}),Object(p.jsx)(d.a,{style:{height:100}})]})},O=i.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},button:{width:200,marginTop:10},inputContainer:{width:300}}),y=n(126),v=n(63),C=n(36),S=function(e){var t,n,a,i=e.id,r=e.chatName,c=e.enterChat,o=Object(l.useState)([]),u=s()(o,2),d=u[0],j=u[1];return Object(l.useEffect)((function(){return b.collection("chats").doc(i).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return j(e.docs.map((function(e){return e.data()})))}))})),Object(p.jsxs)(h.e,{onPress:function(){return c(i,r)},bottomDivider:!0,children:[Object(p.jsx)(h.a,{rounded:!0,source:{uri:(null==(t=d[0])?void 0:t.photoURL)||"https://censur.es/wp-content/uploads/2019/03/default-avatar.png"}}),Object(p.jsxs)(h.e.Content,{children:[Object(p.jsx)(h.e.Title,{numberOfLines:1,ellipsizeMode:"tail",style:{fontWeight:"800"},children:r}),Object(p.jsx)(h.e.Subtitle,{numberOfLines:1,ellipsizeMode:"tail",children:d[0]?(null==(n=d[0])?void 0:n.displayName)+" : "+(null==(a=d[0])?void 0:a.message):"No messages have been sent in this channel."})]})]},i)},w=(i.a.create({}),n(283)),L=n(278),E=function(e){var t=e.navigation,n=Object(l.useState)([]),a=s()(n,2),i=a[0],r=a[1];Object(l.useEffect)((function(){b.collection("chats").onSnapshot((function(e){return r(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){}}),[]);var c=function(){f.signOut().then((function(){t.replace("Login")}))};Object(l.useLayoutEffect)((function(){t.setOptions({title:"Signal",headerStyle:{backgroundColor:"#fff"},headerTitleStyle:{color:"black"},headerTintColor:"black",headerLeft:function(){var e;return Object(p.jsx)(d.a,{style:{marginLeft:20},children:Object(p.jsx)(C.a,{activeOpacity:.5,onPress:c,children:Object(p.jsx)(h.a,{rounded:!0,source:{uri:null==f||null==(e=f.currentUser)?void 0:e.photoURL}})})})},headerRight:function(){return Object(p.jsxs)(d.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20},children:[Object(p.jsx)(C.a,{activeOpacity:.5,children:Object(p.jsx)(w.a,{name:"camerao",size:24,color:"black"})}),Object(p.jsx)(C.a,{onPress:function(){return t.navigate("AddChat")},activeOpacity:.5,children:Object(p.jsx)(L.a,{name:"pencil",size:24,color:"black"})})]})}})}),[t]);var o=function(e,n){t.navigate("Chat",{id:e,chatName:n})};return Object(p.jsx)(y.a,{children:Object(p.jsx)(v.a,{style:T.container,children:i.map((function(e){var t=e.id,n=e.data;return Object(p.jsx)(S,{id:t,chatName:n.chatName,enterChat:o},t)}))})})},T=i.a.create({container:{height:"100%"}}),k=n(24),R=n.n(k),P=n(193),z=i.a.create({container:{backgroundColor:"white",padding:30,height:"100%"}}),N=function(e){var t=e.navigation,n=Object(l.useState)(""),a=s()(n,2),i=a[0],r=a[1];Object(l.useLayoutEffect)((function(){t.setOptions({title:"Add New Chat",headerBackTitle:"Chats"})}),[t]);var c=function(){return R.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i.length>0)){e.next=3;break}return e.next=3,R.a.awrap(b.collection("chats").add({chatName:i}).then((function(){t.goBack()})).catch((function(e){return alert(e)})));case 3:case"end":return e.stop()}}),null,null,null,Promise)};return Object(p.jsxs)(d.a,{style:z.container,children:[Object(p.jsx)(h.d,{type:"text",placeholder:"Enter a chat name",value:i,onChangeText:function(e){return r(e)},onSubmitEditing:c,leftIcon:Object(p.jsx)(P.default,{name:"wechat",type:"antdesign",size:24,color:"black"})}),Object(p.jsx)(h.b,{disabled:!i,onPress:c,title:"Create new Chat"})]})},U=n(92),B=n(13),I=n(28),A=n(104),D=n(273),F=n(264),W=n(105),M=function(e){var t=e.navigation,n=e.route,i=Object(l.useState)(""),r=s()(i,2),c=r[0],o=r[1],g=Object(l.useState)([]),m=s()(g,2),x=m[0],O=m[1];Object(l.useLayoutEffect)((function(){t.setOptions({title:"Chat",headerBackTitleVisible:!1,headerTitleAlign:"left",headerTitle:function(){var e,t;return Object(p.jsxs)(d.a,{style:{flexDirection:"row",alignItems:"center"},children:[Object(p.jsx)(h.a,{rounded:!0,source:{uri:(null==(e=x[0])||null==(t=e.data)?void 0:t.photoURL)||"https://censur.es/wp-content/uploads/2019/03/default-avatar.png"}}),Object(p.jsx)(I.a,{style:{color:"white",marginLeft:10,fontWeight:"700"},children:n.params.chatName})]})},headerLeft:function(){return Object(p.jsx)(C.a,{style:{marginLeft:10},onPress:t.goBack,children:Object(p.jsx)(w.a,{name:"arrowleft",size:24,color:"white"})})},headerRight:function(){return Object(p.jsxs)(d.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20},children:[Object(p.jsx)(C.a,{onPress:function(){return alert("Functionality not implemented yet")},children:Object(p.jsx)(D.a,{name:"video-camera",size:24,color:"white"})}),Object(p.jsx)(C.a,{onPress:function(){return alert("Functionality not implemented yet")},children:Object(p.jsx)(D.a,{name:"phone",size:24,color:"white"})})]})}})}),[t,x]);var S=function(){U.a.dismiss(),b.collection("chats").doc(n.params.id).collection("messages").add({timestamp:j.a.firestore.FieldValue.serverTimestamp(),message:c,displayName:f.currentUser.displayName,email:f.currentUser.email,photoURL:f.currentUser.photoURL}),o("")};return Object(l.useLayoutEffect)((function(){var e=b.collection("chats").doc(n.params.id).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return O(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){return e}}),[n]),Object(p.jsxs)(y.a,{style:{flex:1,backgroundColor:"white"},children:[Object(p.jsx)(a.a,{style:"light"}),Object(p.jsx)(u.a,{behaviour:"ios"===B.a.OS?"padding":"height",style:V.container,keyboardVerticalOffset:90,children:Object(p.jsx)(W.a,{onPress:U.a.dismiss,children:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(v.a,{contentContainerStyle:{paddingTop:15},children:x.map((function(e){var t=e.id,n=e.data;return n.email===f.currentUser.email?Object(p.jsxs)(d.a,{style:V.sender,children:[Object(p.jsx)(h.a,{rounded:!0,containerStyle:{position:"absolute",bottom:-15,right:-5},size:30,position:"absolute",bottom:-15,right:-5,source:{uri:n.photoURL}}),Object(p.jsx)(I.a,{style:V.senderText,children:n.message})]},t):Object(p.jsxs)(d.a,{style:V.reciever,children:[Object(p.jsx)(h.a,{rounded:!0,containerStyle:{position:"absolute",bottom:-15,left:-5},size:30,position:"absolute",bottom:-15,left:-5,source:{uri:n.photoURL}}),Object(p.jsx)(I.a,{style:V.recieverText,children:n.message}),Object(p.jsx)(I.a,{style:V.recieverName,children:n.displayName})]},t)}))}),Object(p.jsxs)(d.a,{style:V.footer,children:[Object(p.jsx)(A.a,{placeholder:"Signal Message",style:V.textInput,value:c,onChangeText:function(e){return o(e)},onSubmitEditing:S}),Object(p.jsx)(C.a,{activeOpacity:.5,onPress:S,children:Object(p.jsx)(F.a,{name:"send",size:24,color:"#2B68E6"})})]})]})})})]})},V=i.a.create({container:{flex:1},footer:{flexDirection:"row",alignItems:"center",width:"100%",padding:15},textInput:{bottom:0,height:40,flex:1,marginRight:15,backgroundColor:"#ECECEC",padding:10,color:"grey",borderRadius:30},sender:{padding:15,backgroundColor:"#2B68E6",alignSelf:"flex-end",borderRadius:20,margin:15,maxHeight:"80%",position:"relative"},senderText:{color:"white",fontWeight:"500",marginLeft:10,marginBottom:15},reciever:{padding:15,backgroundColor:"#ECECEC",alignSelf:"flex-start",borderRadius:20,marginLeft:15,marginBottom:20,maxWidth:"80%",position:"relative"},recieverText:{color:"black",fontWeight:"500",marginLeft:10},recieverName:{left:10,paddingRight:10,fontSize:10,color:"black"}}),H=Object(c.a)(),J={headerStyle:{backgroundColor:"#2C6BED"},headerTitleStyle:{color:"white"},headerTintColor:"white",cardStyle:{flex:1}};function G(){return Object(p.jsx)(r.a,{children:Object(p.jsxs)(H.Navigator,{screenOptions:J,children:[Object(p.jsx)(H.Screen,{name:"Login",component:g}),Object(p.jsx)(H.Screen,{name:"Register",component:x}),Object(p.jsx)(H.Screen,{name:"Home",component:E}),Object(p.jsx)(H.Screen,{name:"AddChat",component:N}),Object(p.jsx)(H.Screen,{name:"Chat",component:M})]})})}i.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})},302:function(e,t,n){e.exports=n(433)}},[[302,1,2]]]);
//# sourceMappingURL=app.686cdca9.chunk.js.map